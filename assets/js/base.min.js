/*! nathanjamal-portfolio 2014-02-24 - Burgerverse Industries */
function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function getIndexIfObjWithAttr(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]===c)return d;return-1}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}var moduleDelay=.4,pageData={fold:void 0,resizeReInitTO:void 0,modules:[],hiddenModules:[]},isTouch=Modernizr.touch,DOMeles={win:void 0,body:void 0,wrapper:void 0},bowie=["london boy","space oddity","the man who sold the world","hunky dory","the rise and fall of ziggy stardust and the spiders from mars","aladdin sane","pin ups","diamond dogs","david live: at the tower theatre philadelphia","young americans","station to station","low","heroes","stage","lodger","scary monsters","let's dance","tonight","never let me down","black tie white noise","outside","earthling","hours","heathen","reality","the next day","david bowie","tin machine"],Page_helper={Init:function(){DOMeles.win=$(window),DOMeles.body=$("body"),DOMeles.wrapper=$("#wrapper"),DOMeles.footer=$("#footer"),pageData.fold=DOMeles.win.height(),$("#footer-spacer").height(DOMeles.footer.outerHeight()),Module.Intro.Init($("#sec-intro")),$("section.section").each(function(){var a=$(this).offset().top,b=$(this).attr("id"),c=$(this).offset().top<=pageData.fold+DOMeles.win.scrollTop()||isTouch;pageData.modules.push({id:b,pos:a,showing:!1}),c||pageData.hiddenModules.push({id:b,pos:a}),Module.Init($(this),c)}),DOMeles.win.scroll(function(){if(!isTouch){var a=$(this).scrollTop(),b=pageData.hiddenModules,c=pageData.fold+a;for(i in b)b[i].pos<=c&&(Module.Start(b[i].id),pageData.hiddenModules.splice(i,1))}}).resize(function(){clearTimeout(pageData.resizeReInitTO),pageData.resizeReInitTO=setTimeout(function(){Page_helper.Kill(!0)},200)})},Start:function(){},Kill:function(a){Module.Intro.Kill($("#sec-intro")),pageData.modules=[],pageData.hiddenModules=[],DOMeles.win.unbind("scroll"),a&&Page_helper.Init()}},Module={Init:function(a,b){b&&Module.Start(a)},Start:function(a){"string"==typeof a&&(a=$("#"+a));var b=new TimelineLite;b.to(a,.15,{autoAlpha:1}),b.to(a,.3,{y:0,ease:Power1.easeOut,onComplete:function(){var b=a.attr("id"),c=getIndexIfObjWithAttr(pageData.modules,"id",b);pageData.modules[c].showing=!0,a.removeClass("hide"),"sec-intro"==b?Module.Intro.Init(a,!0):"sec-skills"==b?Module.Skills.Init(a,!0):"sec-work"==b?Module.Work.Init(a,!0):"sec-contact"==b&&Module.Contact.Init(a,!0)}},"-=0.15")},Pause:function(){},Stop:function(){},Kill:function(){},Intro:{Init:function(a,b){a.height(pageData.fold);var c=a.children("p.largest"),d=a.children("h1");c.css("padding-top",0);var e=c.outerHeight(!0)+d.outerHeight(!0),f=(pageData.fold-e)/2*.95;c.css("padding-top",f),b&&Module.Intro.Start(a)},Start:function(a){var b=new TimelineLite;b.to(a.children("p.largest"),.5,{opacity:1,y:0}),b.to(a.children("h1"),.5,{opacity:1,y:0},"+=0.4")},Kill:function(){}},Skills:{Init:function(a,b){b&&Module.Skills.Start(a)},Start:function(a){var b=new TimelineLite,c=.1;b.pause(),a.children("ul.skills-grid").children("li").each(function(a){var d=0==a?"":"-="+c;b.to($(this),.2,{opacity:1,scale:1,ease:Power2.easeOut},d)}),b.play()}},Work:{Init:function(a,b){a.children("ul.work-grid").on({mouseenter:function(){var a=$(this).children("a.work-hero").children("span.rollover"),b=new TimelineLite;b.to(a,.3,{opacity:1,scale:1,ease:Power2.easeOut}),b.to(a.children("span"),.2,{y:0,opacity:1,ease:Power2.easeOut},"-=0.1")},mouseleave:function(){var a=$(this).children("a.work-hero").children("span.rollover"),b=new TimelineLite;b.to(a.children("span"),.2,{y:"20px",opacity:0,ease:Power2.easeOut}),b.to(a,.3,{opacity:0,scale:.7,ease:Power2.easeOut},"-=0.1")}},"li"),b&&Module.Work.Start(a)},Start:function(a){var b=new TimelineLite,c=.1;b.pause(),a.children("ul.work-grid").children("li").each(function(a){var d=0==a?"":"-="+c;b.to($(this),.3,{opacity:1,scale:1,ease:Power2.easeOut},d)}),b.play()}},Contact:{Init:function(a,b){var c=$("#contact-form");c.on("focus","input, textarea",function(){var a=$(this);if(""==a.val()){var b=a.siblings("label"),c=a.is("input")?"-30px":"-34px",d=a.is("input")?"-2px":"-5px",e=new TimelineLite;a.is("#form-test")&&(d="-10px"),e.to(b,.1,{opacity:0,onComplete:function(){TweenLite.to(b,0,{scale:.85,x:d})}}),e.to(b,.25,{y:c,opacity:1,color:"#42B69A"})}}).on("blur","input, textarea",function(){var a=$(this);if(""==a.val()){var b=a.siblings("label"),c=new TimelineLite;c.to(b,.25,{y:0,color:"#BFBEBF",opacity:0,onComplete:function(){TweenLite.to(b,0,{x:0,scale:1})}}),c.to(b,.15,{opacity:1})}}),$("#form-send").click(function(a){a.preventDefault();var b={name:c.find("#form-name").val(),email:c.find("#form-email").val(),msg:c.find("#form-msg").val(),test:c.find("#form-test").val()};Module.Contact.Validate_form(b)}),b&&Module.Contact.Start(a)},Start:function(){},Validate_form:function(a){$("input.error, textarea.error").removeClass("error");var b=!1;return""==a.name&&(b=!0,$("#form-name").addClass("error")),""!=a.email&&validateEmail(a.email)||(b=!0,$("#form-email").addClass("error")),""==a.msg&&(b=!0,$("#form-msg").addClass("error")),(""==a.test||-1==bowie.indexOf(a.test.toLowerCase()))&&(b=!0,$("#form-test").addClass("error")),b?!1:void Module.Contact.Post_form(a)},Post_form:function(a){$.post(window.baseUrl+"contact.php",{"contact-name":a.name,"contact-email":a.email,"contact-message":a.msg},function(){$("#contact-form").children("p.notif").show()})}}};$(document).ready(function(){var a=isTouch?500:0;setTimeout(function(){Page_helper.Init()},a)});